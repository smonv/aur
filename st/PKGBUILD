# Maintainer: Tien Thanh <tthanh.v9.16@gmail.com>

pkgname=st-tthanh
_pkgname=st
pkgver=0.7.3.g078337d
pkgrel=1
epoch=
pkgdesc="Simple virtual terminal emulator for X"
arch=('x86_64')
url="http://git.suckless.org/st"
license=('MIT')
depends=("libxft")
makedepends=("ncurses" "libxext" "git")
provides=("${_pkgname}")
conflicts=("${_pkgname}")
source=("git://git.suckless.org/st"
		"http://st.suckless.org/patches/st-hidecursor-20160727-308bfbf.diff")
sha1sums=('SKIP' 'SKIP')

pkgver(){
	cd "${srcdir}/${_pkgname}"
	git describe --tags |sed 's/-/./g'
}

prepare() {
	cd "${srcdir}/${_pkgname}"
	echo "${source[@]}"
	sed '/@tic/d' -i Makefile
	git apply ../st-hidecursor-20160727-308bfbf.diff
	git apply ../../config.def.h.diff
}


build() {
	cd "${srcdir}/${_pkgname}"
	make config.h
	make X11INC=/usr/include/X11 X11LIB=/usr/lib/X11
}

package() {
	cd "${srcdir}/${_pkgname}"
	# make PREFIX="/usr" DESTDIR="${pkgdir}" install
	sudo make install
}
